function onloadf(){theme("chk"),document.getElementById("loading-progress").hidden=1,lazyload(),window.addEventListener("scroll",lazyload),page_typ=document.getElementById("page_typ").innerHTML,drawer=new mdui.Drawer("#drawer"),search_dialog=new mdui.Dialog("#search_dialog",{overlay:!1}),"index"==page_typ?(document.getElementById("toc_button").hidden=1,document.getElementById("toc_drawer").hidden=1):"article"==page_typ&&(document.getElementById("md-body")&&(highlight(),gentoc("md-body")),toc_drawer=new mdui.Drawer("#toc_drawer"),document.getElementById("toc_button").hidden=0,document.getElementById("toc_drawer").hidden=0),katex_();var e=document.querySelector("body .mdui-container");e.style.minHeight=window.innerHeight-document.body.clientHeight+e.clientHeight+"px"}function pjax_on(e=0){new Pjax({elements:"a",selectors:["title","#TOC",".mdui-container",".js-pjax"]});document.addEventListener("pjax:send",function(){document.getElementById("loading-progress").hidden=0}),document.addEventListener("pjax:complete",function(){document.getElementById("loading-progress").hidden=1,onloadf(),mdui.mutation()}),0==e&&mdui.snackbar({message:"pjax已开启",buttonText:"刷新以撤销",onButtonClick:function(){window.location.reload()},timeout:2e3}),1==e&&mdui.snackbar({message:"开启音乐默认开启pjax",timeout:2e3}),document.getElementById("pjax_button").hidden=1}function totop(){0!=document.body.scrollTop||0!=document.documentElement.scrollTop?(window.scrollBy(0,-(speed+=20)),timeOut=setTimeout("totop()",20)):(clearTimeout(timeOut),document.getElementById("totop").classList.add("mdui-fab-hide"),speed=0)}function getCookie(e){var t,n=e+"=",d=decodeURIComponent(document.cookie),a=d.split(";");for(i in a){for(t=a[i];" "==t.charAt(0);)t=t.substring(1);if(0==t.indexOf(n))return t.substring(n.length,t.length)}return""}function setCookie(e,t,n=.5){if(getCookie(e)!=t){var d=new Date;d.setTime(d.getTime()+24*n*60*60*1e3);var i="expires="+d.toUTCString();document.cookie=e+"="+t+";"+i+";path=/"}}function theme_night(){document.querySelector("html").classList.add("mdui-theme-layout-dark"),document.querySelector("body").classList.add("mdui-theme-layout-dark");var e=document.getElementById("theme_css"),t=document.createElement("link"),n=document.createElement("link");t.href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release/build/styles/nord.min.css",t.type="text/css",t.rel="stylesheet",e.appendChild(t),n.href="/assets/theme/night.css",n.type="text/css",n.rel="stylesheet",e.appendChild(n)}function theme_pink(){setCookie("theme","pink");var e=document.createElement("link");e.href="/assets/theme/pink.css",e.type="text/css",e.rel="stylesheet",document.getElementById("theme_css").appendChild(e)}function theme_blue(){setCookie("theme","blue");var e=document.createElement("link");e.href="/assets/theme/blue.css",e.type="text/css",e.rel="stylesheet",document.getElementById("theme_css").appendChild(e)}function theme_clr(){document.getElementById("theme_css").innerHTML="",node=document.querySelector("html"),node.classList.contains("mdui-theme-layout-dark")&&node.classList.remove("mdui-theme-layout-dark"),node=document.querySelector("body"),node.classList.contains("mdui-theme-layout-dark")&&node.classList.remove("mdui-theme-layout-dark")}function theme(e){"chk"==e&&(e=getCookie("theme")),"day"==e&&(setCookie("theme","day"),theme_clr()),"pink"==e&&(setCookie("theme","pink"),theme_clr(),theme_pink()),"blue"==e&&(setCookie("theme","blue"),theme_clr(),theme_blue()),"night"==e&&(setCookie("theme","night"),theme_clr(),theme_night())}function copy(e){var t=document.createElement("textarea");t.textContent=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove()}function katex_(){document.querySelectorAll("code latex").forEach(e=>{var t=document.createElement("span");katex.render(e.innerText,t,{throwOnError:!1}),e.parentElement.replaceWith(t.children[0])}),document.querySelectorAll("code latex_display").forEach(e=>{var t=document.createElement("span");katex.render(e.innerText,t,{displayMode:!0,throwOnError:!1}),e.parentElement.replaceWith(t.children[0])})}function highlight(){document.querySelectorAll("pre code").forEach(e=>{e.innerHTML=e.innerHTML.trim();var t=e.classList[0],n=e.innerText.length;try{t=t.split("-"),t=t[t.length-1]}catch{t="text"}hljs.highlightBlock(e);for(var d=document.createElement("code"),i="",a=e.innerText.split("\n").length,o=1;o<=a;++o)i+=o+"\n";d.classList.add("hljs","hljs-nb"),d.style.float="left",d.innerText=i,e.parentElement.insertBefore(d,e);var l=document.createElement("div"),c=document.createElement("div"),r=document.createElement("div");c.classList.add("hljs-cb"),c.setAttribute("data-title","复制"),c.addEventListener("click",function(){copy(this.parentElement.parentElement.innerText),this.setAttribute("data-title","复制成功"),setTimeout(function(e){e.setAttribute("data-title","复制")},1e3,this),mdui.snackbar({message:"复制成功!",position:"top"})}),r.classList.add("hljs-fd"),r.setAttribute("data-title","折叠"),r.addEventListener("click",function(){this.parentElement.parentElement.parentElement.hidden=1,this.parentElement.parentElement.parentElement.previousElementSibling.hidden=0});var s=document.createElement("div");s.classList.add("hljs-lang"),s.setAttribute("data-title",t),l.classList.add("hljs-bar"),l.append(s),l.append(r),l.append(c),e.append(l);var m=document.createElement("div"),u=document.createElement("div"),h=document.createElement("div"),p=document.createElement("div");m.hidden=1,m.addEventListener("click",function(){this.hidden=1,this.nextElementSibling.hidden=0}),u.classList.add("hljs-fd"),u.setAttribute("data-title","展开"),u.classList.add("hljs-fd"),h.classList.add("hljs-lang"),h.setAttribute("data-title",t),p.classList.add("hljs-len"),p.setAttribute("data-title",n),m.append(h),m.append(p),m.append(u),e.parentElement.parentElement.insertBefore(m,e.parentElement)});var e=document.createElement("style");e.type="text/css",e.innerHTML=[".hljs{position:relative;}",".hljs-bar{display:none;width:fit-content;position:absolute;top:0;right:0;}",".hljs:hover .hljs-bar{display:block;}",".hljs-cb,.hljs-fd,.hljs-lang,.hljs-len{","display: inline-block;","width: fit-content;","color: #fff;","padding: 2px 5px;","cursor: pointer;","}",".hljs-cb{","background-color: #F7A4B9;","}",".hljs-fd{","background-color: #66ccff;","}",".hljs-lang{","background-color: #39c5bb;","}",".hljs-len{","background-color: #f7a4b9;","}",".hljs-fd:after,.hljs-cb:after,.hljs-lang:after,.hljs-len:after{","content: attr(data-title)","}",".hljs-nb{color: #bbb !important;}"].join(""),document.getElementsByTagName("head")[0].appendChild(e)}function gentoc(e){var t,n,d=document.getElementById("toc"),i=document.getElementById(e),a=i.firstElementChild;for(d.innerHTML="";a;){if("H1"==a.tagName){a.setAttribute("id",a.textContent);var o=document.createElement("a");o.textContent=a.textContent,o.href="#"+a.id,t=document.createElement("ul");var l=document.createElement("li");l.classList.add("mdui-text-truncate"),l.style.marginBottom="16px",l.appendChild(o),l.appendChild(t),d.appendChild(l)}else if("H2"==a.tagName){a.setAttribute("id",a.textContent),t||(t=document.createElement("ul"),d.appendChild(t));o=document.createElement("a");o.textContent=a.textContent,o.href="#"+a.id,n=document.createElement("ul");l=document.createElement("li");l.classList.add("mdui-text-truncate"),l.appendChild(o),l.appendChild(n),t.appendChild(l)}else if("H3"==a.tagName){a.setAttribute("id",a.textContent),n||(n=document.createElement("ul"),d.appendChild(n));o=document.createElement("a");o.textContent=a.textContent,o.href="#"+a.id;l=document.createElement("li");l.classList.add("mdui-text-truncate"),l.appendChild(o),n.appendChild(l)}if(a=a.nextElementSibling,!a)break}}function copylink(){copy("window.location.href"),mdui.snackbar({message:"复制成功!",position:"top"})}function lazyload(){for(var e=document.getElementsByTagName("img"),t=e.length,n=0,d=document.documentElement.clientHeight,i=document.documentElement.scrollTop||document.body.scrollTop;n<t&&e[n].offsetTop<d+i;++n){var a=e[n].getAttribute("data-src");null!=a&&e[n].src!=a&&(e[n].src=e[n].getAttribute("data-src"))}}function search(e){document.getElementById("loading-progress").hidden=0;var t=document.getElementById("search_input").value.toLowerCase();document.getElementById("search_result").innerHTML="";var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){if(mdui.mutation(),4==n.readyState){for(i in document.getElementById("loading-progress").hidden=1,data=JSON.parse(this.responseText),data){var e=0;if(-1!=data[i].title.toLowerCase().indexOf(t))e=1;else for(j in data[i].tags){if(-1!=data[i].tags[j].toLowerCase().indexOf(t)){e=1;break}for(j in data[i].categories)for(k in data[i].categories[j]){if(-1!=data[i].categories[j][k].toLowerCase().indexOf(t)){e=1;break}-1!=data[i].content.toLowerCase().indexOf(t)&&(e=1)}}e&&(document.getElementById("search_result").innerHTML+="<a href="+data[i].link+" class='mdui-list-item'><div class='mdui-list-item-content'><div class='mdui-list-item-title'>"+data[i].title+"</div><div class='mdui-list-item-text'>"+data[i].content.substr(0,50).replace(/</g,"&lt;")+"</div></div></a>")}search_dialog.handleUpdate()}},n.send()}document.onreadystatechange=function(){"complete"==document.readyState&&onloadf()},document.onkeydown=function(e){var t=e.keyCode||e.which||e.charCode,n=e.ctrlKey||e.metaKey;n&&(39==t&&document.getElementById("nxt_button").click(),37==t&&document.getElementById("pre_button").click())};var timeOut,speed=0;window.onscroll=function(){document.documentElement.scrollTop>=300?document.getElementById("totop").classList.remove("mdui-fab-hide"):document.getElementById("totop").classList.add("mdui-fab-hide")};